let t="http://172.160.248.2/api";axios.defaults.headers.common.Authorization="Bearer "+window.localStorage.getItem("jwt"),axios.defaults.baseURL=t+"/en";let e=t;t="",null==window.localStorage.getItem("theme")&&window.localStorage.setItem("theme","dark"),null==window.localStorage.getItem("lan")&&window.localStorage.setItem("lan","EN"),document.querySelector("html").setAttribute("data-theme",window.localStorage.getItem("theme")),document.addEventListener("alpine:init",()=>{Alpine.store("logged_in",0),Alpine.store("show",{show:0,init(){window.localStorage.getItem("show")&&(this.show=window.localStorage.getItem("show"))},set(t){window.localStorage.setItem("show",t),this.show=t}}),Alpine.store("show").init(),window.localStorage.getItem("lan")?Alpine.store("lan",window.localStorage.getItem("lan")):Alpine.store("lan","EN"),Alpine.data("register",()=>({email:"",password:"",password_repeat:"",error_message:"",try_register(){axios.post(t+"register",{email:this.email,password:this.password,password_repeat:this.password_repeat}).then(t=>{200==t.status&&Alpine.store("show").set(1)}).catch(t=>{this.error_message=t.response.data.message})}})),Alpine.data("login",()=>({email:"",password:"",error_message:"",init(){axios.get(t+"jwt").then(t=>{200==t.status&&Alpine.store("logged_in",1)}).catch(t=>{401==t.status&&Alpine.store("logged_in",0)})},try_login(){axios.post(t+"login",{email:this.email,password:this.password},{withCredentials:!0}).then(t=>{200==t.status&&(console.log(this.email),this.email="",this.password="",this.error_message="",Alpine.store("logged_in",1),window.localStorage.setItem("jwt",t.data.message.access_token),axios.defaults.headers.common.Authorization="Bearer "+window.localStorage.getItem("jwt"),Alpine.store("show").set(2))}).catch(t=>{this.error_message=t.response.data.message})},logout(){axios.get(t+"logout",{withCredentials:!0}).then(t=>{Alpine.store("show").set(1)}).catch(t=>{}).finally(()=>{Alpine.store("logged_in",0)})}})),Alpine.data("notes",()=>({notes:[],notes_settings:{},notes_updates:{},title:"",desc:"",tab:0,error_message:"",page:0,notesPerPage:10,totalNotes:0,totalPages:0,deleteindex:-1,loading:1,adding:0,updating:0,reset(){this.notes=[],this.notes_settings={},this.notes_updates={},this.title="",this.desc="",this.tab=0,this.error_message="",this.page=0,this.notesPerPage=10,this.totalNotes=0,this.totalPages=0,this.deleteindex=-1},isAuthorized:()=>axios.get(t+"jwt").then(t=>200==t.status).catch(t=>!1),getNotes(){this.loading=1,this.notes=[],setTimeout(()=>{axios.get(t+`notes/${this.page*this.notesPerPage}/${this.notesPerPage}`,{withCredentials:!0}).then(t=>{200==t.status&&(this.loading=0,this.notes=t.data.message.notes,this.notes_settings={})}).catch(t=>{this.loading=0}),this.getNoteCount()},500)},getNoteCount(){axios.get(t+"notecount",{withCredentials:!0}).then(t=>{200==t.status&&(this.totalNotes=t.data.message.count,this.totalPages=Math.floor(this.totalNotes/this.notesPerPage+1))}).catch(t=>{console.log(t)})},addNote(){this.adding=1,setTimeout(()=>{axios.post(t+"addnote",{title:this.title,desc:this.desc},{withCredentials:!0}).catch(t=>{console.log(t),this.error_message=t.response.data.message}).finally(t=>{this.getNotes(),this.adding=0})},500)},updateNote(e){this.updating=1,setTimeout(()=>{let[s,o,a]=this.notes[e];axios.put(t+"updatenote",{title:s,desc:o,added:a},{withCredentials:!0}).catch(t=>{console.log(t)}).finally(t=>{this.getNotes(),this.updating=0,this.notes_updates[e]=!1})},500)},deleteNote(e){axios.delete(t+`deletenote/${this.notes[e][2]}`,{withCredentials:!0}).catch(t=>{}).finally(t=>{this.getNotes()})},changePage(t){this.page=t,this.getNotes(),console.log(t),console.log(this.totalPages)}})),Alpine.data("footer",()=>({toggleTheme(){let t=window.localStorage.getItem("theme");t?"dark"==t?t="light":"light"==t&&(t="dark"):t="dark",window.localStorage.setItem("theme",t),document.querySelector("html").setAttribute("data-theme",window.localStorage.getItem("theme"))},toggleLanguage(){let t=window.localStorage.getItem("lan");t?"EN"==t?t="PL":"PL"==t&&(t="EN"):t="EN",window.localStorage.setItem("lan",t),Alpine.store("lan",t),axios.defaults.baseURL=e+"/"+t.toLowerCase()}}))});
//# sourceMappingURL=index.a6541cc7.js.map
